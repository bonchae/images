<svg viewBox="0 0 600 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="600" height="500" fill="#fafbfc"/>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto" fill="#2c3e50">
      <polygon points="0 0, 8 3, 0 6"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="300" y="25" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#2c3e50">Transformer Layer</text>
  
  <!-- Input -->
  <rect x="225" y="450" width="150" height="30" fill="#3498db" stroke="#2980b9" stroke-width="2" rx="5"/>
  <text x="300" y="470" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Input</text>
  
  <!-- Multi-Head Attention -->
  <rect x="175" y="350" width="250" height="60" fill="#e8f4fd" stroke="#3498db" stroke-width="2" rx="8"/>
  <text x="300" y="370" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#2980b9">Multi-Head Attention</text>
  <text x="300" y="390" text-anchor="middle" font-family="Arial" font-size="10" fill="#2c3e50">Query, Key, Value → Attention Weights → Output</text>
  
  <!-- Add & Norm 1 -->
  <rect x="225" y="280" width="150" height="40" fill="#27ae60" stroke="#229954" stroke-width="2" rx="5"/>
  <text x="300" y="300" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Add & Norm</text>
  <text x="300" y="315" text-anchor="middle" font-family="Arial" font-size="9" fill="white">x + Attention(x)</text>
  
  <!-- Feed-Forward -->
  <rect x="175" y="180" width="250" height="60" fill="#fff3cd" stroke="#f39c12" stroke-width="2" rx="8"/>
  <text x="300" y="200" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#d68910">Feed-Forward Network</text>
  <text x="300" y="220" text-anchor="middle" font-family="Arial" font-size="10" fill="#2c3e50">Linear → ReLU → Linear</text>
  
  <!-- Add & Norm 2 -->
  <rect x="225" y="110" width="150" height="40" fill="#27ae60" stroke="#229954" stroke-width="2" rx="5"/>
  <text x="300" y="130" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Add & Norm</text>
  <text x="300" y="145" text-anchor="middle" font-family="Arial" font-size="9" fill="white">x + FFN(x)</text>
  
  <!-- Output -->
  <rect x="225" y="60" width="150" height="30" fill="#2c3e50" stroke="#1a252f" stroke-width="2" rx="5"/>
  <text x="300" y="80" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Output</text>
  
  <!-- Main flow arrows -->
  <path d="M 300 450 L 300 410" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 300 350 L 300 320" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 300 280 L 300 240" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 300 180 L 300 150" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 300 110 L 300 90" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Residual connections -->
  <path d="M 300 430 L 120 430 L 120 300 L 225 300" stroke="#e74c3c" stroke-width="2" fill="none" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <path d="M 300 260 L 480 260 L 480 130 L 375 130" stroke="#e74c3c" stroke-width="2" fill="none" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  
  <!-- Residual labels -->
  <text x="105" y="365" font-family="Arial" font-size="8" fill="#e74c3c" transform="rotate(-90 105 365)">Residual</text>
  <text x="495" y="195" font-family="Arial" font-size="8" fill="#e74c3c" transform="rotate(-90 495 195)">Residual</text>
  
  <!-- Key concept box -->
  <rect x="450" y="350" width="140" height="120" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="5"/>
  <text x="520" y="370" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="#2c3e50">Key Components</text>
  
  <text x="460" y="390" font-family="Arial" font-size="9" font-weight="bold" fill="#3498db">Attention:</text>
  <text x="460" y="405" font-family="Arial" font-size="8" fill="#666">Learns relationships</text>
  <text x="460" y="415" font-family="Arial" font-size="8" fill="#666">between words</text>
  
  <text x="460" y="435" font-family="Arial" font-size="9" font-weight="bold" fill="#f39c12">Feed-Forward:</text>
  <text x="460" y="450" font-family="Arial" font-size="8" fill="#666">Applies learned</text>
  <text x="460" y="460" font-family="Arial" font-size="8" fill="#666">transformations</text>
  
</svg>